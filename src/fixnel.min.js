(function(B,C,D){function E(a){a.preventDefault()}function e(){throw Error("MUST BE IMPLEMENTS THIS METHOD");}function l(a,b){return function(){a.apply(b,arguments)}}function y(a){function b(){}var c=this,d=function(){c.apply(this,arguments)};b.prototype=c.prototype;d.prototype=new b;d.prototype.callParent=function(){c.apply(this,arguments)};d.prototype.super_=c.prototype;m(d.prototype,a);return d}function m(a){for(var b=Array.prototype.slice.call(arguments,1),c=b.length,d=0,z,s;d<c;d++)for(s in z=
b[d],z)a[s]=b[d][s];return a}function n(){}function h(){this.init.apply(this,arguments)}function j(a,b){this.init.apply(this,arguments)}function o(a){this.init.apply(this,arguments)}function i(a,b){this.init.apply(this,arguments)}function k(a,b){this.init.apply(this,arguments)}var t="ontouchstart"in window,u=t?"touchstart":"mousedown",F=t?"touchmove":"mousemove",G=t?"touchend":"mouseup",H=Math.abs,f=Math.pow,p=Math.sqrt,I=Math.sin,A=Math.cos,v=Math.PI;n.prototype=function(){function a(a,b){if(!a)throw"INVALID EVENT TYPE "+
a;var c=this.handlers||(this.handlers={}),g=[].concat(c[a]||[]),f=b||{},h,e,i;f.type||(f.type=a);for(e=0,h=g.length;e<h;++e)(i=g[e][0])&&i.call(g[e][1]||this,this,f);g=c["*"]||[];for(e=0,h=g.length;e<h;++e)(i=g[e][0])&&i.call(g[e][1]||this,this,f)}function b(a,b,c){if(!a)throw"addEventListener:INVALID EVENT TYPE "+a+" "+b;var g=this.handlers||(this.handlers={});(g[a]||(g[a]=[])).push([b,c])}function c(a,b){if(!a)throw"removeEventListener:INVALID EVENT TYPE "+a+" "+fn;for(var c=(this.handlers||(this.handlers=
{}))[a]||[],g=c.length;g;)c[--g][0]===b&&c.splice(g,1)}return{dispatchEvent:a,trigger:a,pub:a,addEventListener:b,bind:b,sub:b,on:b,removeEventListener:c,unbind:c,off:c,one:function(a,b,c){function g(){e.removeEventListener(a,g,c);b.apply(c||e,arguments)}var e=this;this.addEventListener(a,g,c)}}}();h.mode={NOT_FADE:0,FADE_OUT:1,FADE_IN:2,WAIT:3};h.DEFAULT_DURATION=10;h.DEFAULT_EASING="easeOutQuad";h.DEFAULT_DELAY=400;h.FPS=32;h.prototype={Easing:o,init:function(a){this.scbar=a;this.target=a.getEl();
this.fadeState=h.mode.NOT_FADE},fadeIn:function(){this._clearTimer();if(this._fadeCheck(1))return false;this._fade(0,1,1)},fadeOut:function(){this._clearTimer();if(this._fadeCheck(0))return false;this._fade(1,0)},_fadeCheck:function(a){return+this._getOpacity()===a},_clearTimer:function(){clearTimeout(this.waitTimer);clearTimeout(this.fadeTimer)},_fade:function(a,b,c){var d=this,e=a,f=0,c=c||h.DEFAULT_DURATION,g=this.easing,i=h.FPS;g&&(e=g.getValue()||a);this.easing=g=new this.Easing(h.DEFAULT_EASING,
0,e,b-e,c);clearTimeout(this.fadeTimer);(function K(){var a=g.getValue();if(a===null)return d.easing=null,clearTimeout(d.fadeTimer),d.fadeTimer=null,d._setOpacity(b),d._fadeEnd(),false;d._setOpacity(a);d.fadeTimer=setTimeout(K,i)})()},_fadeEnd:function(){this.fadeState=h.mode.NOT_FADE},delayFadeOut:function(a){var b=this;a||(a=h.DEFAULT_DELAY);clearTimeout(this.waitTimer);this.waitTimer=setTimeout(function(){b.waitTimer=null;if(b._getOpacity()===0)return false;b.fadeOut()},a)},cancelDelay:function(){clearTimeout(this.waitTimer)},
_getOpacity:function(){return this.target.style.opacity},_setOpacity:function(a){if(!a)return false;this.target.style.opacity=a}};h.prototype.constructor=h;j.extend=y;j.prototype=m({},n.prototype,{FPS:1E3/60,DURATION:30,Easing:o,init:function(a,b){b||(b={});this.fl=a;this._opt=b;this._createElement();this._getContentInfo();this._setInitSize();this._fader=new h(this);this.fl.on("update",this._update,this);this.fl.on("move",this._move,this);this.fl.on("movestart",this._moveStart,this);this.fl.on("moveend",
this._moveEnd,this);this.render()},render:function(){this.container.appendChild(this.el);this._renderShow();return this},show:function(){this.inner.style.display="block"},hide:function(){this.inner.style.display="none"},_renderShow:function(){this._show();this._wait(2E3)},getEl:function(){return this.el},_getContentInfo:function(){this._minSize=this._getMinSize();this.container=this.fl.getContainer();this.contentSize=this.fl.getSize();this.containerSize=this.fl.getParentSize();this.scrollSize=this.contentSize-
this.containerSize;this.ratio=this.containerSize/this.contentSize},_getSize:function(){return this.containerSize*this.ratio|0},_getMinSize:e,_setPos:e,_setSize:e,_setElSize:e,_setInitSize:function(){var a=this._getSize();if(!a)return false;if(a<this._minSize)a=this._minSize;this.size=a;this._setSize(a);this._setElSize(a)},_setSizeStart:function(a){a=(this.containerSize*this.ratio|0)-a/2;this._setPosOriginStart();this._setPos(0);this._setSize(a)},_setSizeEnd:function(a){a=(this.containerSize*this.ratio|
0)+(a+this.scrollSize)/2;this._setPosOriginEnd();this._setPos(-this.scrollSize);this._setSize(a)},_setPosOriginStart:e,_setPosOriginEnd:e,_move:function(a,b){var c=b.value;if(c>0)this._setSizeStart(c);else if(c<-this.scrollSize)this._setSizeEnd(c);else if(c===null)return this.trigger("moveend"),false;else this._setPos(c)},_resetSize:function(){this._setSize(this._getSize())},_moveStart:function(){clearTimeout(this.timer);this._fader.cancelDelay();if(this.moving||this.timer)return false;this.timer=
null;this.moving=true;this._show()},_moveEnd:function(){this._wait(300);this.moving=false;this._resetSize()},_wait:function(a){this._fader.delayFadeOut(a)},_hide:function(){this._fader.fadeOut()},_show:function(){this._fader.fadeIn()},_createElement:e,_update:function(){this._getContentInfo();this._setInitSize();this._setPos(this._pos);this._renderShow()}});j.prototype.constructor=j;var w=j.extend({_getMinSize:function(){return+(this.el.style.width||"").replace("px","")},_setPos:function(a){if(!a)return false;
this._pos=a;this.el.style.webkitTransform="translate3d(0, "+-(a*this.ratio|0)+"px, 0)"},_setSize:function(a){if(!a)return false;if(a<this._minSize)a=this._minSize;this.inner.style.height=a+"px"},_setElSize:function(a){if(!a)return false;if(a<this._minSize)a=this._minSize;this.el.style.height=a+"px"},_setPosOriginStart:function(){this.inner.style.top=0;this.inner.style.bottom="auto"},_setPosOriginEnd:function(){this.inner.style.top="auto";this.inner.style.bottom=0},_createElement:function(){var a=
document.createElement("span"),b=document.createElement("span");a.className="fixnel-scrollbar";a.style.cssText="opacity: 0;position: absolute;right: 2px;top: 0;width: 6px;";b.className="fixnel-scrollbar-inner";b.style.cssText=["position: absolute;left: 0;top: 0;width: 100%;","background-color: "+(this._opt.scrollbarColor||"rgba(0, 0, 0, 0.5)")+";","border: solid 1px "+(this._opt.scrollbarBdrColor||"rgba(255, 255, 255, 0.3)")+";","border-radius: "+(this._opt.scrollbarBdrRadius||"3px")+";"].join("");
a.appendChild(b);this.el=a;this.inner=b}});w.prototype.constructor=w;var x=j.extend({_getMinSize:function(){return+(this.el.style.height||"").replace("px","")},_setPos:function(a){if(!a)return false;this._pos=a;this.el.style.webkitTransform="translate3d("+-(a*this.ratio|0)+"px, 0, 0)"},_setSize:function(a){if(!a)return false;if(a<this._minSize)a=this._minSize;this.inner.style.width=a+"px"},_setElSize:function(a){if(!a)return false;if(a<this._minSize)a=this._minSize;this.el.style.width=a+"px"},_setPosOriginStart:function(){this.inner.style.left=
0;this.inner.style.right="auto"},_setPosOriginEnd:function(){this.inner.style.left="auto";this.inner.style.right=0},_createElement:function(){var a=document.createElement("span"),b=document.createElement("span");a.className="fixnel-scrollbar";a.style.cssText="opacity: 0;position: absolute;bottom: 2px;left: 0;height: 6px;";b.className="fixnel-scrollbar-inner";b.style.cssText=["position: absolute;left: 0;top: 0;height: 100%;","background-color: "+(this._opt.scrollbarColor||"rgba(0, 0, 0, 0.5)")+";",
"border: solid 1px "+(this._opt.scrollbarBdrColor||"rgba(255, 255, 255, 0.3)")+";","border-radius: "+(this._opt.scrollbarBdrRadius||"3px")+";"].join("");a.appendChild(b);this.el=a;this.inner=b}});x.prototype.constructor=x;o.prototype={init:function(a,b,c,d,e){this.timingFunction=this.easing[a||"easeInQuad"];this.t=b;this.b=c;this.c=d;this.d=e},easing:{easeInCubic:function(a,b,c,d){return c*f(a/d,3)+b},easeOutCubic:function(a,b,c,d){return c*(f(a/d-1,3)+1)+b},easeInOutCubic:function(a,b,c,d){return(a/=
d/2)<1?c/2*f(a,3)+b:c/2*(f(a-2,3)+2)+b},easeInQuart:function(a,b,c,d){return c*f(a/d,4)+b},easeOutQuart:function(a,b,c,d){return-c*(f(a/d-1,4)-1)+b},easeInOutQuart:function(a,b,c,d){return(a/=d/2)<1?c/2*f(a,4)+b:-c/2*(f(a-2,4)-2)+b},easeInQuint:function(a,b,c,d){return c*f(a/d,5)+b},easeOutQuint:function(a,b,c,d){return c*(f(a/d-1,5)+1)+b},easeInOutQuint:function(a,b,c,d){return(a/=d/2)<1?c/2*f(a,5)+b:c/2*(f(a-2,5)+2)+b},easeInSine:function(a,b,c,d){return c*(1-A(a/d*(v/2)))+b},easeOutSine:function(a,
b,c,d){return c*I(a/d*(v/2))+b},easeInOutSine:function(a,b,c,d){return c/2*(1-A(v*a/d))+b},easeInExpo:function(a,b,c,d){return c*f(2,10*(a/d-1))+b},easeOutExpo:function(a,b,c,d){return c*(-f(2,-10*a/d)+1)+b},easeInOutExpo:function(a,b,c,d){return(a/=d/2)<1?c/2*f(2,10*(a-1))+b:c/2*(-f(2,-10*--a)+2)+b},easeInCirc:function(a,b,c,d){return c*(1-p(1-(a/=d)*a))+b},easeOutCirc:function(a,b,c,d){return c*p(1-(a=a/d-1)*a)+b},easeInOutCirc:function(a,b,c,d){return(a/=d/2)<1?c/2*(1-p(1-a*a))+b:c/2*(p(1-(a-=
2)*a)+1)+b},easeInQuad:function(a,b,c,d){return c*(a/=d)*a+b},easeOutQuad:function(a,b,c,d){return-c*(a/=d)*(a-2)+b},easeInOutQuad:function(a,b,c,d){return(a/=d/2)<1?c/2*a*a+b:-c/2*(--a*(a-2)-1)+b}},getValue:function(){return this.t>this.d?null:this.timingFunction(this.t++,this.b,this.c,this.d)}};i.directionType={VERTICAL:"vertical",HORIZONTAL:"horizontal",BOTH:"both"};i.prototype=m({},n.prototype,{_setEvents:function(){this._vfixnel&&(this._vfixnel.on("movestart",this._moveStartY,this),this._vfixnel.on("move",
this._moveY,this),this._vfixnel.on("moveend",this._moveEndY,this));this._hfixnel&&(this._hfixnel.on("movestart",this._moveStartX,this),this._hfixnel.on("move",this._moveX,this),this._hfixnel.on("moveend",this._moveEndX,this))},_moveStartX:function(){this.trigger("movestartx")},_moveStartY:function(){this.trigger("movestarty")},_moveX:function(a,b){this.trigger("movex",b)},_moveY:function(a,b){this.trigger("movey",b)},_moveEndX:function(){this.trigger("moveendx")},_moveEndY:function(){this.trigger("moveendy")},
init:function(a,b){b||(b={});b.direction===i.directionType.BOTH?(this._vfixnel=new q(a,b),this._hfixnel=new r(a,b)):b.direction===i.directionType.HORIZONTAL?this._hfixnel=new r(a,b):this._vfixnel=new q(a,b);this._setEvents()},moveTo:function(a,b,c){this._vfixnel&&this._vfixnel.moveTo(b,c);this._hfixnel&&this._hfixnel.moveTo(a,c)},update:function(){this._vfixnel&&this._vfixnel.update();this._hfixnel&&this._hfixnel.update()}});i.prototype.constructor=i;k.extend=y;k.prototype=m({},n.prototype,{dragging:false,
DURATION:30,FPS:1E3/60,prevAcc:0,prevPos:0,prevT:0,acc:0,_v:0,pos:0,_getScrollbarOptions:function(){return{scrollbarColor:this._opt.scrollbarColor,scrollbarBdrColor:this._opt.scrollbarBdrColor,scrollbarBdrRadius:this._opt.scrollbarBdrRadius}},init:function(a,b){b||(b={});this.el=a;this._opt=b;this.parentEl=a.parentNode;this.Easing=o;this.el.originalSize=this.getSize();this.scrollbar=this._getScrollbar();this._initSettings();this._checkSize();this.update();a.className+=a.className?" fixnel-body":"fixnel-body";
a.addEventListener(u,l(this._down,this),false);a.addEventListener(u,l(this._stop,this),false);C.addEventListener(G,l(this._up,this),false);a.addEventListener(F,l(this._move,this),false);this.parentEl.addEventListener(u,E,false);B.addEventListener("resize",l(this.update,this),false)},moveTo:function(a,b){var c=this,d,e,f;b||(b={});if(a===0||a){a*=-1;if(a>0)a=0;else if(a<(d=-this._getEdge()))a=d;if(b.animOff||b.animate===false)return this._setPos(a),false;d=this._getPos();e=new this.Easing("easeOutExpo",
0,d,a-d,10);this._autoMoving=true;(function J(){var b=e.getValue();if(b===null)return e=null,clearTimeout(f),c._setPos(a),c._autoMoving=false,null;c._setPos(b);f=setTimeout(J,16)})()}},getValue:function(){var a,b,c=0,d=0,d=this.DURATION,e=this._v;a=0;if(this.bounce)return a=this.bounce.getValue(),a===null?null:a|0;a=this._getPos();if(H(e)<=0)if(a>0)c=a|0,this.bounce=new this.Easing("easeOutExpo",0,c,0-c,d);else if(a<(b=-this._getEdge()))c=a|0,this.bounce=new this.Easing("easeOutExpo",0,c,b-c,d);else return null;
if(a+e>0)this._v=e>10?10:e;if(a-e<-this._getEdge())this._v=e<-10?-10:e;return a=a+this.getV()|0},_initSettings:function(){var a=window.getComputedStyle(this.parentEl,"").position;this.el.style.webkitTextSizeAdjust="none";this.el.style.textSizeAdjust="none";this.parentEl.style.overflow="hidden";if(a==="static")this.parentEl.style.position="relative"},_checkSize:function(){var a=this.getParentSize();this.getOriginalSize()<a?(this._setSize(a),this.scrollbar.hide()):(this._setSize("auto"),this.scrollbar.show())},
_checkOverflow:function(){-this._getEdge()>this._getPos()&&this._setPos(-(this.getSize()-this.getParentSize()))},_scrolling:function(){var a=this;a.moving=true;clearInterval(a.timer);a.timer=setInterval(function(){var b=a.getValue();if(b===null)return a._stopScrolling(),false;a._setPos(b)},this.FPS)},_stopScrolling:function(){this._v=0;clearInterval(this.timer);this.timer=null;this.moving=false;this.bounce=null;this.trigger("moveend")},_stop:function(){var a=this;this.stopTimer=setTimeout(function(){clearInterval(a.timer);
a.timer=null},100)},_getScrollbar:e,_getEdge:function(){return this.getSize()-this.getParentSize()},getV:function(){var a=this._v;this._v=this._v-this._v/30<<0;return a},_setSize:e,_getPos:function(){return this.pos},_setPos:e,_getEventPos:e,getContainer:function(){return this.parentEl},getSize:e,getOriginalSize:e,getParentSize:e,_down:function(a){if(this._autoMoving)return false;var b=this._getPos(),c=-this._getEdge();b>0?(this._setPos(0),this._stopScrolling()):b<c&&(this._setPos(c),this._stopScrolling());
clearInterval(this.timer);this.bounce=null;this.dragging=true;this.trigger("movestart");this.prevPos=this._getEventPos(a);this.prevT=+new Date},_move:function(a){a.preventDefault();if(!this.dragging)return true;clearTimeout(this.stopTimer);clearTimeout(this.timer);this.bounce=null;var b=this._getPos(),c=+new Date,d=c-this.prevT,a=this._getEventPos(a),e=this.prevPos-a,f=e/(d||(d=1)),g=b-e;this.acc+=(f-this.prevAcc)/d*d;this._v=-this.acc*d;if(g>0||g<-this._getEdge())g=b-(e/2|0);this._setPos(g);this.prevT=
c;this.prevPos=a;this.prevAcc=f},_up:function(){if(!this.dragging)return true;this.dragging=false;this._scrolling()},update:function(){this._checkSize();this._checkOverflow();this.trigger("update")}});k.prototype.constructor=k;var q=k.extend({_getScrollbar:function(){return new w(this,this._getScrollbarOptions())},_setSize:function(a){if(a){if(Object.prototype.toString.call(a)==="[object String]"){this.el.style.height=a;return}}else return false;this.el.style.height=a+"px"},_setPos:function(a){var b=
(new WebKitCSSMatrix(this.el.style.webkitTransform)).e;this.pos=a;this.el.style.webkitTransform="translate3d("+b+"px, "+a+"px, 0)";this.trigger("move",{value:a})},_getEventPos:function(a){return a.touches?a.touches[0].pageY:a.pageY},getSize:function(){return this.el.clientHeight},getOriginalSize:function(){var a;this.el.style.height="auto";if(this.el.originalSize!==(a=this.getSize()))this.el.originalSize=a;return this.el.originalSize},getParentSize:function(){return this.parentEl.clientHeight}});
q.prototype.constructor=q;var r=k.extend({_getScrollbar:function(){return new x(this,this._getScrollbarOptions())},_setSize:function(a){if(a){if(Object.prototype.toString.call(a)==="[object String]"){this.el.style.width=a;return}}else return false;this.el.style.width=a+"px"},_setPos:function(a){var b=(new WebKitCSSMatrix(this.el.style.webkitTransform)).f;this.pos=a;this.el.style.webkitTransform="translate3d("+a+"px, "+b+"px, 0)";this.trigger("move",{value:a})},_getEventPos:function(a){return a.touches?
a.touches[0].pageX:a.pageX},getSize:function(){return this.el.clientWidth},getOriginalSize:function(){var a;this.el.style.width="auto";if(this.el.originalSize!==(a=this.getSize()))this.el.originalSize=a;return this.el.originalSize},getParentSize:function(){return this.parentEl.clientWidth}});r.prototype.constructor=r;D.Fixnel=i})(this,document,this);
